<?xml version="1.0" encoding="UTF-8"?>
<tool id="weka.classifier.smo" name="WEKA's Sequential Minimal Optmization" version="0.1.0">
    <description>Implements John Platt's sequential minimal optimization algorithm for training a support vector classifier.</description>
    <command>
        <![CDATA[
             java -cp '$__tool_directory__/weka.jar'
                -t '$train_file'
                #if str( $testing.testing_selection ) == "cv_option"
                    -x $cv_folds
                #end if
                #if str( $testing.testing_selection ) == "split_option"
                    -split-percentage $split_perc $split_preserve
                #end if
                #if str( $testing.testing_selection ) == "file_option"
                    -T '$test_file'
                #end if
                #if str( $testing.testing_selection ) == "no_option"
                    -no-cv
                #end if
                #if str( $class.class_selection ) == "index_option"
                    -c $class_index
                #end if
        ]]>
    </command>
    <inputs>
        <param format="arff" name="train_file" type="data" label="Training file" />
        <conditional name="testing">
            <param label="Testing mode" name="testing_selection" type="select">
                <option selected="true" value="no_option">No testing</option>
                <option value="cv_option">Cross-Validation on the training data</option>
                <option value="split_option">Train/test split of the training data</option>
                <option value="file_option">Test file</option>
            </param>
            <when value="no_option"></when>
            <when value="cv_option">
                <param name="cv_folds" type="integer" value='10' label="Number of folds for cross-validation" />
            </when>
            <when value="split_option">
                <param name="split_perc" type="integer" value='75' label="Training percentage of the file (eg. 75 for a 75/25 train/test split" />
                <param name="split_preserve" type="boolean" checked="false" label="Preserve order when splitting" truevalue="-preserve-order" falsevalue="" />
            </when>
            <when value="file_option">
                <param format="arff" name="test_file" type="data" label="Testing file" />
            </when>
        </conditional>
        <conditional name="class">
            <param label="Class Index" name="class_selection" type="select">
                <option selected="true" value="default_option">Use the default class index (last)</option>
                <option value="index_option">Specify a different class index</option>
            </param>
            <when value="default_option"></when>
            <when value="index_option">
                <param name="class_index" type="integer" value='0' label="Class Index" />
            </when>
        </conditional>
    </inputs>
</tool>